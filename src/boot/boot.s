.set        VGA_BUFFER,                 0xB8000

.section    .text
.globl      start
.type       start,                      @function

start:
            movl    $message,           %esi
            movl    $VGA_BUFFER,        %edi
            movl    $message_length,    %ecx
            shrl    $1,                 %ecx
            rep     movsw

            movl    $stack_top,         %esp

            cli
            call kernel_main
.Lhlt:      hlt
            jmp     .Lhlt

.section    .bss
stack_bottom:
            .space 16 * 1024
stack_top:

.section    .rodata
message:
            .short 0xf4e, 0xf45, 0xf56, 0xf45, 0xf52, 0xf20, 0xf47, 0xf4f, 0xf4e
            .short 0xf4e, 0xf41, 0xf20, 0xf47, 0xf49, 0xf56, 0xf45, 0xf20, 0xf59
            .short 0xf4f, 0xf55, 0xf20, 0xf55, 0xf50, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf4e
            .short 0xf45, 0xf56, 0xf45, 0xf52, 0xf20, 0xf47, 0xf4f, 0xf4e, 0xf4e
            .short 0xf41, 0xf20, 0xf4c, 0xf45, 0xf54, 0xf20, 0xf59, 0xf4f, 0xf55
            .short 0xf20, 0xf44, 0xf4f, 0xf57, 0xf4e, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf4e, 0xf45
            .short 0xf56, 0xf45, 0xf52, 0xf20, 0xf47, 0xf4f, 0xf4e, 0xf4e, 0xf41
            .short 0xf20, 0xf52, 0xf55, 0xf4e, 0xf20, 0xf41, 0xf52, 0xf4f, 0xf55
            .short 0xf4e, 0xf44, 0xf20, 0xf41, 0xf4e, 0xf44, 0xf20, 0xf44, 0xf45
            .short 0xf53, 0xf45, 0xf52, 0xf54, 0xf20, 0xf59, 0xf4f, 0xf55, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf4e, 0xf45, 0xf56
            .short 0xf45, 0xf52, 0xf20, 0xf47, 0xf4f, 0xf4e, 0xf4e, 0xf41, 0xf20
            .short 0xf4d, 0xf41, 0xf4b, 0xf45, 0xf20, 0xf59, 0xf4f, 0xf55, 0xf20
            .short 0xf43, 0xf52, 0xf59, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf4e, 0xf45, 0xf56, 0xf45
            .short 0xf52, 0xf20, 0xf47, 0xf4f, 0xf4e, 0xf4e, 0xf41, 0xf20, 0xf53
            .short 0xf41, 0xf59, 0xf20, 0xf47, 0xf4f, 0xf4f, 0xf44, 0xf42, 0xf59
            .short 0xf45, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf4e, 0xf45, 0xf56, 0xf45, 0xf52
            .short 0xf20, 0xf47, 0xf4f, 0xf4e, 0xf4e, 0xf41, 0xf20, 0xf54, 0xf45
            .short 0xf4c, 0xf4c, 0xf20, 0xf41, 0xf20, 0xf4c, 0xf49, 0xf45, 0xf20
            .short 0xf41, 0xf4e, 0xf44, 0xf20, 0xf48, 0xf55, 0xf52, 0xf54, 0xf20
            .short 0xf59, 0xf4f, 0xf55, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20, 0xf20
            .short 0xf20, 0xf20, 0xf20
.set        message_length,             . - message
